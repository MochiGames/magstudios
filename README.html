<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Silkscreen&display=swap">
  <style>
    body {
      background-color: transparent;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: 'Silkscreen', monospace;
    }

    #header {
      margin-top: 20px;
      font-size: 36px;
    }

    .ferrari-red {
      color: #dc0000; /* Ferrari Red */
    }

    .ferrari-yellow {
      color: #f1c40f; /* Ferrari Yellow */
    }

    #game-board {
      display: grid;
      grid-template-columns: repeat(20, 20px);
      grid-gap: 1px;
    }

    .cell {
      width: 20px;
      height: 20px;
      background-color: #dc0000; /* Ferrari Red */
      border: 1px solid #fff;
    }

    .snake {
      background-color: #f1c40f; /* Ferrari Yellow */
    }

    .food {
      background-color: #fff;
      font-size: 16px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #message {
      margin-top: 20px;
      font-size: 24px;
      color: #fff;
    }

    #play-again {
      margin-top: auto;
      margin-bottom: 20px;
      background-color: #dc0000; /* Ferrari Red */
      color: #f1c40f; /* Ferrari Yellow */
      padding: 10px;
      cursor: pointer;
      border: none;
      font-size: 18px;
    }
  </style>
  <title>Ferrari Snake</title>
</head>
<body>

<div id="header"><span class="ferrari-red">Ferrari</span> <span class="ferrari-yellow">Games</span></div>
<div id="game-board"></div>
<div id="message"></div>
<button id="play-again" class="ferrari-red">Play Again</button>

<script>
  const gameBoard = document.getElementById('game-board');
  const message = document.getElementById('message');
  const playAgainBtn = document.getElementById('play-again');
  const gridSize = 20;
  const cells = Array.from({ length: gridSize * gridSize }, (_, index) => createCell(index));

  let snake = [{ x: 10, y: 10 }];
  let direction = 'right';
  let food = {};
  let gameActive = false;

  function createCell(index) {
    const cell = document.createElement('div');
    cell.classList.add('cell');
    cell.dataset.index = index;
    gameBoard.appendChild(cell);
    return cell;
  }

  function renderSnake() {
    cells.forEach(cell => cell.classList.remove('snake'));

    snake.forEach(segment => {
      const index = segment.x + segment.y * gridSize;
      cells[index].classList.add('snake');
    });
  }

  function renderFood() {
    const index = food.x + food.y * gridSize;
    const foodCell = cells[index];
    foodCell.innerHTML = 'üçé';
    foodCell.classList.add('food');
  }

  function handleKeyPress(event) {
    if (!gameActive) {
      startGame();
      return;
    }

    switch (event.key) {
      case 'ArrowUp':
      case 'w':
        direction = 'up';
        break;
      case 'ArrowDown':
      case 's':
        direction = 'down';
        break;
      case 'ArrowLeft':
      case 'a':
        direction = 'left';
        break;
      case 'ArrowRight':
      case 'd':
        direction = 'right';
        break;
    }
  }

  function moveSnake() {
    const head = { ...snake[0] };

    switch (direction) {
      case 'up':
        head.y = (head.y - 1 + gridSize) % gridSize;
        break;
      case 'down':
        head.y = (head.y + 1) % gridSize;
        break;
      case 'left':
        head.x = (head.x - 1 + gridSize) % gridSize;
        break;
      case 'right':
        head.x = (head.x + 1) % gridSize;
        break;
    }

    snake.unshift(head);

    if (checkCollision()) {
      displayMessage("Game Over! üêç");
      gameActive = false;
    } else if (checkFood()) {
      generateFood();
    } else {
      snake.pop();
    }

    renderSnake();
  }

  function checkCollision() {
    const head = snake[0];
    return snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y);
  }

  function checkFood() {
    const head = snake[0];
    return head.x === food.x && head.y === food.y;
  }

  function generateFood() {
    const emptyCells = cells.filter(cell => !cell.classList.contains('snake') && !cell.classList.contains('food'));
    if (emptyCells.length === 0) {
      displayMessage("You won! üèÜ");
      gameActive = false;
      return;
    }

    const randomIndex = Math.floor(Math.random() * emptyCells.length);
    const { x, y } = getCoordinatesFromIndex(emptyCells[randomIndex].dataset.index);
    food = { x, y };

    renderFood();
  }

  function getCoordinatesFromIndex(index) {
    const cellIndex = parseInt(index, 10);
    const x = cellIndex % gridSize;
    const y = Math.floor(cellIndex / gridSize);
    return { x, y };
  }

  function displayMessage(msg) {
    message.innerText = msg;
  }

  function startGame() {
    snake = [{ x: 10, y: 10 }];
    direction = 'right';
    food = {};
    gameActive = true;
    displayMessage('');
    renderSnake();
    generateFood();
  }

  function resetGame() {
    startGame();
  }

  playAgainBtn.addEventListener('click', resetGame);
  document.addEventListener('keydown', handleKeyPress);
</script>

</body>
</html>
